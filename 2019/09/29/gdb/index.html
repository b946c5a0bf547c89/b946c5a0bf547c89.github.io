<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="crashFor ubuntuDonwload the debuginfo file from http:&#x2F;&#x2F;ddebs.ubuntu.com&#x2F;pool&#x2F;main&#x2F;l&#x2F;linux&#x2F; 123456789$ sudo apt install ubuntu-dbgsym-keyring$ sudo apt-get update$ crash &#x2F;usr&#x2F;lib&#x2F;debug&amp;#">
<meta property="og:type" content="article">
<meta property="og:title" content="Rookie try to debug">
<meta property="og:url" content="http://yoursite.com/2019/09/29/gdb/index.html">
<meta property="og:site_name" content="b946c5a0bf547c89">
<meta property="og:description" content="crashFor ubuntuDonwload the debuginfo file from http:&#x2F;&#x2F;ddebs.ubuntu.com&#x2F;pool&#x2F;main&#x2F;l&#x2F;linux&#x2F; 123456789$ sudo apt install ubuntu-dbgsym-keyring$ sudo apt-get update$ crash &#x2F;usr&#x2F;lib&#x2F;debug&amp;#">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-09-29T05:05:03.000Z">
<meta property="article:modified_time" content="2020-01-05T11:56:28.003Z">
<meta property="article:author" content="Ginger">
<meta property="article:tag" content="gdb">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2019/09/29/gdb/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Rookie try to debug | b946c5a0bf547c89</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">b946c5a0bf547c89</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">My Silent Hill</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/gdb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/logo-4-blog.png">
      <meta itemprop="name" content="Ginger">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="b946c5a0bf547c89">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Rookie try to debug
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-29 13:05:03" itemprop="dateCreated datePublished" datetime="2019-09-29T13:05:03+08:00">2019-09-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-05 19:56:28" itemprop="dateModified" datetime="2020-01-05T19:56:28+08:00">2020-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/debug/" itemprop="url" rel="index">
                    <span itemprop="name">debug</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/09/29/gdb/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/29/gdb/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>14 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="crash"><a href="#crash" class="headerlink" title="crash"></a>crash</h3><h4 id="For-ubuntu"><a href="#For-ubuntu" class="headerlink" title="For ubuntu"></a><a href="https://wiki.ubuntu.com/Debug%20Symbol%20Packages" target="_blank" rel="noopener">For ubuntu</a></h4><p>Donwload the debuginfo file from <a href="http://ddebs.ubuntu.com/pool/main/l/linux/" target="_blank" rel="noopener">http://ddebs.ubuntu.com/pool/main/l/linux/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install ubuntu-dbgsym-keyring</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ crash &#x2F;usr&#x2F;lib&#x2F;debug&#x2F;boot&#x2F;vmlinux-4.15.0-65-generic </span><br><span class="line"></span><br><span class="line">or you can add source.list</span><br><span class="line">## debuginfo</span><br><span class="line">deb http:&#x2F;&#x2F;ddebs.ubuntu.com&#x2F; bionic main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;ddebs.ubuntu.com&#x2F; bionic-updates main restricted universe multiverse</span><br><span class="line">deb http:&#x2F;&#x2F;ddebs.ubuntu.com&#x2F; bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h4 id="For-CentOS"><a href="#For-CentOS" class="headerlink" title="For CentOS"></a>For CentOS</h4><p>Download the debuginfo file from <a href="http://debuginfo.centos.org/" target="_blank" rel="noopener">http://debuginfo.centos.org/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">123653 root      20   0       0      0      0 R 100.0  0.0 349:57.90 kworker/u385:1</span><br><span class="line"></span><br><span class="line">$ dmesg -T <span class="comment"># show the issue</span></span><br><span class="line">[Mon Sep 23 22:44:52 2019] kworker/u385:9: page allocation failure: order:2, mode:0x104020</span><br><span class="line">[Mon Sep 23 22:44:52 2019] CPU: 16 PID: 4490 Comm: kworker/u385:9 Kdump: loaded Tainted: P           OE  ------------   3.10.0-957.10.1.el7_lustre.x86_64 <span class="comment">#1</span></span><br><span class="line">[Mon Sep 23 22:44:52 2019] Hardware name: Dell Inc. PowerEdge R730/0WCJNT, BIOS 2.9.1 12/04/2018</span><br><span class="line">[Mon Sep 23 22:44:52 2019] Workqueue: writeback bdi_writeback_workfn (flush-lustre-ffff95d539)</span><br><span class="line">[Mon Sep 23 22:44:52 2019] Call Trace:</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  &lt;IRQ&gt;  [&lt;ffffffff91362e41&gt;] dump_stack+0x19/0x1b</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90dbcbc0&gt;] warn_alloc_failed+0x110/0x180</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff912812d1&gt;] ? ip_route_input_slow+0x181/0xa20</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff9135e44e&gt;] __alloc_pages_slowpath+0x6b6/0x724</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90dc1224&gt;] __alloc_pages_nodemask+0x404/0x420</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e0e188&gt;] alloc_pages_current+0x98/0x110</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90dbb96e&gt;] __get_free_pages+0xe/0x40</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e1989e&gt;] kmalloc_order_trace+0x2e/0xa0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e1d8e1&gt;] ? __kmalloc+0x211/0x230</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e1d8e1&gt;] __kmalloc+0x211/0x230</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90c61dee&gt;] ? physflat_send_IPI_mask+0xe/0x10</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0174d7a&gt;] bnx2x_frag_alloc.isra.58+0x2a/0x40 [bnx2x]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc01754b0&gt;] bnx2x_alloc_rx_data.isra.66+0x50/0x220 [bnx2x]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cd2f19&gt;] ? ttwu_do_wakeup+0x19/0xe0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc01763ee&gt;] bnx2x_rx_int+0x87e/0x1950 [bnx2x]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cd6530&gt;] ? try_to_wake_up+0x190/0x390</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cd6802&gt;] ? default_wake_function+0x12/0x20</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cd67f0&gt;] ? wake_up_state+0x20/0x20</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc017940d&gt;] bnx2x_poll+0x1dd/0x260 [bnx2x]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff9123af1f&gt;] net_rx_action+0x26f/0x390</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90ca0f45&gt;] __do_softirq+0xf5/0x280</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff9137932c&gt;] call_softirq+0x1c/0x30</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90c2e675&gt;] do_softirq+0x65/0xa0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90ca12c5&gt;] irq_exit+0x105/0x110</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff9137a5e6&gt;] do_IRQ+0x56/0xf0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff9136c362&gt;] common_interrupt+0x162/0x162</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  &lt;EOI&gt;  [&lt;ffffffff90f7d957&gt;] ? rb_next+0x27/0x50</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc09fb314&gt;] osc_cache_writeback_range+0x414/0x1260 [osc]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0f22e0c&gt;] ? cl_io_slice_add+0x5c/0x190 [obdclass]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0f24acb&gt;] ? cl_io_init0.isra.15+0x8b/0x160 [obdclass]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0f24bda&gt;] ? cl_io_sub_init+0x3a/0x80 [obdclass]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc098e151&gt;] ? lov_stripe_intersects+0xa1/0x170 [lov]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc09ea815&gt;] osc_io_fsync_start+0x85/0x1a0 [osc]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0f24660&gt;] ? cl_io_iter_init+0x120/0x120 [obdclass]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0f246c8&gt;] cl_io_start+0x68/0x130 [obdclass]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0f2689c&gt;] cl_io_loop+0xcc/0x1c0 [obdclass]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc10c421b&gt;] cl_sync_file_range+0x2db/0x380 [lustre]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc10e2557&gt;] ll_writepages+0x77/0x1e0 [lustre]</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90dc3511&gt;] do_writepages+0x21/0x50</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e6ffb0&gt;] __writeback_single_inode+0x40/0x260</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e70a44&gt;] writeback_sb_inodes+0x1c4/0x490</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e70daf&gt;] __writeback_inodes_wb+0x9f/0xd0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e715e3&gt;] wb_writeback+0x263/0x2f0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e71e6c&gt;] bdi_writeback_workfn+0x1cc/0x460</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cb9d8f&gt;] process_one_work+0x17f/0x440</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cbae26&gt;] worker_thread+0x126/0x3c0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cbad00&gt;] ? manage_workers.isra.25+0x2a0/0x2a0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cc1c71&gt;] kthread+0xd1/0xe0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cc1ba0&gt;] ? insert_kthread_work+0x40/0x40</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff91375c37&gt;] ret_from_fork_nospec_begin+0x21/0x21</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90cc1ba0&gt;] ? insert_kthread_work+0x40/0x40</span><br></pre></td></tr></table></figure>

<h4 id="attach-the-process"><a href="#attach-the-process" class="headerlink" title="attach the process"></a>attach the process</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br></pre></td><td class="code"><pre><span class="line">crash&gt; <span class="built_in">set</span> pid 123653</span><br><span class="line">crash&gt; bt</span><br><span class="line">PID: 123653  TASK: ffff95bf768cc100  CPU: 16  COMMAND: <span class="string">"kworker/u385:1"</span></span><br><span class="line"> <span class="comment">#0 [ffff95da80be7dc8] __schedule at ffffffff91368747</span></span><br><span class="line"> <span class="comment">#1 [ffff95da80be7e58] schedule at ffffffff91368c49</span></span><br><span class="line"> <span class="comment">#2 [ffff95da80be7e68] worker_thread at ffffffff90cbaed9</span></span><br><span class="line"> <span class="comment">#3 [ffff95da80be7ec8] kthread at ffffffff90cc1c71</span></span><br><span class="line"></span><br><span class="line">crash&gt; bt -f</span><br><span class="line">PID: 123653  TASK: ffff95bf768cc100  CPU: 16  COMMAND: <span class="string">"kworker/u385:1"</span></span><br><span class="line"> <span class="comment">#0 [ffff95da80be7dc8] __schedule at ffffffff91368747</span></span><br><span class="line">    ffff95da80be7dd0: 0000000000000046 ffff95da80be7fd8</span><br><span class="line">    ffff95da80be7de0: ffff95da80be7fd8 ffff95da80be7fd8</span><br><span class="line">    ffff95da80be7df0: 000000000001ab80 ffff95a0d3265140</span><br><span class="line">    ffff95da80be7e00: ffff95a0d320d800 ffff95bf748e62f0</span><br><span class="line">    ffff95da80be7e10: ffff95bf48423680 00000000372ea3aa</span><br><span class="line">    ffff95da80be7e20: ffffffff90cb9e2a ffff95a0d320d820</span><br><span class="line">    ffff95da80be7e30: ffff95bf484236b0 ffff95bf768cc100</span><br><span class="line">    ffff95da80be7e40: ffff95a0d320d800 ffff95bf48423680</span><br><span class="line">    ffff95da80be7e50: ffff95da80be7e60 ffffffff91368c49</span><br><span class="line"> <span class="comment">#1 [ffff95da80be7e58] schedule at ffffffff91368c49</span></span><br><span class="line">    ffff95da80be7e60: ffff95da80be7ec0 ffffffff90cbaed9</span><br><span class="line"> <span class="comment">#2 [ffff95da80be7e68] worker_thread at ffffffff90cbaed9</span></span><br><span class="line">    ffff95da80be7e70: ffff95be532cbd60 00000000372ea3aa</span><br><span class="line">    ffff95da80be7e80: ffff95bf768cc100 ffff95bf768cc100</span><br><span class="line">    ffff95da80be7e90: ffff95bf768cc100 ffff95be532cbd38</span><br><span class="line">    ffff95da80be7ea0: ffff95bf48423680 ffffffff90cbad00</span><br><span class="line">    ffff95da80be7eb0: 0000000000000000 0000000000000000</span><br><span class="line">    ffff95da80be7ec0: ffff95da80be7f48 ffffffff90cc1c71</span><br><span class="line"> <span class="comment">#3 [ffff95da80be7ec8] kthread at ffffffff90cc1c71</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## looks like has passed the "page allocation failure" , here is just schedule info </span></span><br><span class="line"></span><br><span class="line"><span class="comment">## let me dig the info from </span></span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e0e188&gt;] alloc_pages_current+0x98/0x110</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90dbb96e&gt;] __get_free_pages+0xe/0x40</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e1989e&gt;] kmalloc_order_trace+0x2e/0xa0</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e1d8e1&gt;] ? __kmalloc+0x211/0x230</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90e1d8e1&gt;] __kmalloc+0x211/0x230</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffff90c61dee&gt;] ? physflat_send_IPI_mask+0xe/0x10</span><br><span class="line">[Mon Sep 23 22:44:52 2019]  [&lt;ffffffffc0174d7a&gt;] bnx2x_frag_alloc.isra.58+0x2a/0x40 [bnx2x]</span><br><span class="line"></span><br><span class="line"><span class="comment">## Got the address info</span></span><br><span class="line">crash&gt; dis -l ffffffff90e0e188</span><br><span class="line">/usr/src/debug/kernel-3.10.0-957.10.1.el7/linux-3.10.0-957.10.1.el7_lustre.x86_64/mm/mempolicy.c: 2160</span><br><span class="line">0xffffffff90e0e188 &lt;alloc_pages_current+152&gt;:   <span class="built_in">test</span>   %rax,%rax</span><br><span class="line"></span><br><span class="line">            -r  (reverse) displays all instructions from the start of the routine up to and including the designated address.</span><br><span class="line"></span><br><span class="line">crash&gt; dis -lr ffffffff90e0e188</span><br><span class="line">.............</span><br><span class="line"></span><br><span class="line"><span class="comment">## Got the struct name</span></span><br><span class="line">crash&gt; vi /usr/src/debug/kernel-3.10.0-957.10.1.el7/linux-3.10.0-957.10.1.el7_lustre.x86_64/mm/mempolicy.c</span><br><span class="line">   2137 struct page *alloc_pages_current(gfp_t gfp, unsigned order)</span><br><span class="line">   2138 &#123;</span><br><span class="line">   2139         struct mempolicy *pol = &amp;default_policy;</span><br><span class="line">   2140         struct page *page;</span><br><span class="line">   2141         unsigned int cpuset_mems_cookie;</span><br><span class="line">   2142</span><br><span class="line">   2143         <span class="keyword">if</span> (!in_interrupt() &amp;&amp; !(gfp &amp; __GFP_THISNODE))</span><br><span class="line">   2144                 pol = get_task_policy(current);</span><br><span class="line">   2145</span><br><span class="line">   2146 retry_cpuset:</span><br><span class="line">   2147         cpuset_mems_cookie = read_mems_allowed_begin();</span><br><span class="line">   2148</span><br><span class="line">   2149         /*</span><br><span class="line">   2150          * No reference counting needed <span class="keyword">for</span> current-&gt;mempolicy</span><br><span class="line">   2151          * nor system default_policy</span><br><span class="line">   2152          */</span><br><span class="line">   2153         <span class="keyword">if</span> (pol-&gt;mode == MPOL_INTERLEAVE)</span><br><span class="line">   2154                 page = alloc_page_interleave(gfp, order, interleave_nodes(pol));</span><br><span class="line">   2155         <span class="keyword">else</span></span><br><span class="line">   2156                 page = __alloc_pages_nodemask(gfp, order,</span><br><span class="line">   2157                                 policy_zonelist(gfp, pol, numa_node_id()),</span><br><span class="line">   2158                                 policy_nodemask(gfp, pol));</span><br><span class="line">   2159</span><br><span class="line">   2160         <span class="keyword">if</span> (unlikely(!page &amp;&amp; read_mems_allowed_retry(cpuset_mems_cookie)))</span><br><span class="line">   2161                 goto retry_cpuset;</span><br><span class="line">   2162</span><br><span class="line">   2163         <span class="built_in">return</span> page;</span><br><span class="line">   2164 &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Got the data from struct</span></span><br><span class="line"></span><br><span class="line">crash&gt; struct page 0xffffffff90e0e188</span><br><span class="line">struct page &#123;</span><br><span class="line">  flags = 14160241206726001992,</span><br><span class="line">  mapping = 0x5e415d415c415b10,</span><br><span class="line">  &#123;</span><br><span class="line">    &#123;</span><br><span class="line">      index = 18048551072128833,</span><br><span class="line">      freelist = 0x401f0fc35d5f41,</span><br><span class="line">      rh_reserved_pfmemalloc = 65,</span><br><span class="line">      thp_mmu_gather = &#123;</span><br><span class="line">        counter = -1017290943</span><br><span class="line">      &#125;,</span><br><span class="line">      pmd_huge_pte = 0x401f0fc35d5f41</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      counters = 76139140190259301,</span><br><span class="line">      &#123;</span><br><span class="line">        &#123;</span><br><span class="line">          _mapcount = &#123;</span><br><span class="line">            counter = 76236901</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            inuse = 18533,</span><br><span class="line">            objects = 1163,</span><br><span class="line">            frozen = 0</span><br><span class="line">          &#125;,</span><br><span class="line">          units = 76236901</span><br><span class="line">        &#125;,</span><br><span class="line">        _count = &#123;</span><br><span class="line">          counter = 17727525</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    lru = &#123;</span><br><span class="line">      next = 0x9c8988b4800,</span><br><span class="line">      prev = 0xffff77850fdb8548</span><br><span class="line">    &#125;,</span><br><span class="line">    pgmap = 0x9c8988b4800,</span><br><span class="line">    &#123;</span><br><span class="line">      next = 0x9c8988b4800,</span><br><span class="line">      pages = 266044744,</span><br><span class="line">      pobjects = -34939</span><br><span class="line">    &#125;,</span><br><span class="line">    list = &#123;</span><br><span class="line">      next = 0x9c8988b4800,</span><br><span class="line">      prev = 0xffff77850fdb8548</span><br><span class="line">    &#125;,</span><br><span class="line">    slab_page = 0x9c8988b4800</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    private = 9892438056389241087,</span><br><span class="line">    ptl = &#123;</span><br><span class="line">      &#123;</span><br><span class="line">        rlock = &#123;</span><br><span class="line">          raw_lock = &#123;</span><br><span class="line">            val = &#123;</span><br><span class="line">              counter = -106764033</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    slab_cache = 0x8948fffff9a2e8ff,</span><br><span class="line">    first_page = 0x8948fffff9a2e8ff</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">             -o  show member offsets when displaying structure definitions;</span><br><span class="line">                 <span class="keyword">if</span> used with an address or symbol argument, each member will</span><br><span class="line">                 be preceded by its virtual address.</span><br><span class="line"></span><br><span class="line">crash&gt; struct page -o</span><br><span class="line">struct page &#123;</span><br><span class="line">   [0] unsigned long flags;</span><br><span class="line">   [8] struct address_space *mapping;</span><br><span class="line">       struct &#123;</span><br><span class="line">           union &#123;</span><br><span class="line">  [16]         unsigned long index;</span><br><span class="line">  [16]         void *freelist;</span><br><span class="line">  [16]         bool rh_reserved_pfmemalloc;</span><br><span class="line">  [16]         atomic_t thp_mmu_gather;</span><br><span class="line">  [16]         pgtable_t pmd_huge_pte;</span><br><span class="line">           &#125;;</span><br><span class="line">           union &#123;</span><br><span class="line">  [24]         unsigned long counters;</span><br><span class="line">               struct &#123;</span><br><span class="line">                   union &#123;</span><br><span class="line">  [24]                 atomic_t _mapcount;</span><br><span class="line">                       struct &#123;</span><br><span class="line">  [24]                     unsigned int inuse : 16;</span><br><span class="line">  [26]                     unsigned int objects : 15;</span><br><span class="line">  [27]                     unsigned int frozen : 1;</span><br><span class="line">                       &#125;;</span><br><span class="line">  [24]                 int units;</span><br><span class="line">                   &#125;;</span><br><span class="line">  [28]             atomic_t _count;</span><br><span class="line">               &#125;;</span><br><span class="line">           &#125;;</span><br><span class="line">       &#125;;</span><br><span class="line">       union &#123;</span><br><span class="line">  [32]     struct list_head lru;</span><br><span class="line">  [32]     struct dev_pagemap *pgmap;</span><br><span class="line">           struct &#123;</span><br><span class="line">  [32]         struct page *next;</span><br><span class="line">  [40]         int pages;</span><br><span class="line">  [44]         int pobjects;</span><br><span class="line">           &#125;;</span><br><span class="line">  [32]     struct list_head list;</span><br><span class="line">  [32]     struct slab *slab_page;</span><br><span class="line">       &#125;;</span><br><span class="line">       union &#123;</span><br><span class="line">  [48]     unsigned long private;</span><br><span class="line">  [48]     spinlock_t ptl;</span><br><span class="line">  [48]     struct kmem_cache *slab_cache;</span><br><span class="line">  [48]     struct page *first_page;</span><br><span class="line">       &#125;;</span><br><span class="line">&#125;</span><br><span class="line">SIZE: 64</span><br><span class="line"></span><br><span class="line"><span class="comment"># show the data</span></span><br><span class="line"></span><br><span class="line">crash&gt; struct page.lru 0xffffffff90e0e188</span><br><span class="line">    lru = &#123;</span><br><span class="line">      next = 0x9c8988b4800,</span><br><span class="line">      prev = 0xffff77850fdb8548</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">struct page.lru 0xffffffff90e0e188</span><br><span class="line">    lru = &#123;</span><br><span class="line">      next = 0x9c8988b4800,</span><br><span class="line">      prev = 0xffff77850fdb8548</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### mapping the addr</span></span><br><span class="line">crash&gt; struct page -o 0xffffffff90e0e188</span><br><span class="line">struct page &#123;</span><br><span class="line">  [ffffffff90e0e188] unsigned long flags;</span><br><span class="line">  [ffffffff90e0e190] struct address_space *mapping;</span><br><span class="line">       struct &#123;</span><br><span class="line">           union &#123;</span><br><span class="line">  [ffffffff90e0e198]         unsigned long index;</span><br><span class="line">  [ffffffff90e0e198]         void *freelist;</span><br><span class="line">  [ffffffff90e0e198]         bool rh_reserved_pfmemalloc;</span><br><span class="line">  [ffffffff90e0e198]         atomic_t thp_mmu_gather;</span><br><span class="line">  [ffffffff90e0e198]         pgtable_t pmd_huge_pte;</span><br><span class="line">           &#125;;</span><br><span class="line">           union &#123;</span><br><span class="line">  [ffffffff90e0e1a0]         unsigned long counters;</span><br><span class="line">               struct &#123;</span><br><span class="line">                   union &#123;</span><br><span class="line">  [ffffffff90e0e1a0]                 atomic_t _mapcount;</span><br><span class="line">                       struct &#123;</span><br><span class="line">  [ffffffff90e0e1a0]                     unsigned int inuse : 16;</span><br><span class="line">  [ffffffff90e0e1a2]                     unsigned int objects : 15;</span><br><span class="line">  [ffffffff90e0e1a3]                     unsigned int frozen : 1;</span><br><span class="line">                       &#125;;</span><br><span class="line">  [ffffffff90e0e1a0]                 int units;</span><br><span class="line">                   &#125;;</span><br><span class="line">  [ffffffff90e0e1a4]             atomic_t _count;</span><br><span class="line">               &#125;;</span><br><span class="line">           &#125;;</span><br><span class="line">       &#125;;</span><br><span class="line">       union &#123;</span><br><span class="line">  [ffffffff90e0e1a8]     struct list_head lru;</span><br><span class="line">  [ffffffff90e0e1a8]     struct dev_pagemap *pgmap;</span><br><span class="line">           struct &#123;</span><br><span class="line">  [ffffffff90e0e1a8]         struct page *next;</span><br><span class="line">  [ffffffff90e0e1b0]         int pages;</span><br><span class="line">  [ffffffff90e0e1b4]         int pobjects;</span><br><span class="line">           &#125;;</span><br><span class="line">  [ffffffff90e0e1a8]     struct list_head list;</span><br><span class="line">  [ffffffff90e0e1a8]     struct slab *slab_page;</span><br><span class="line">       &#125;;</span><br><span class="line">       union &#123;</span><br><span class="line">  [ffffffff90e0e1b8]     unsigned long private;</span><br><span class="line">  [ffffffff90e0e1b8]     spinlock_t ptl;</span><br><span class="line">  [ffffffff90e0e1b8]     struct kmem_cache *slab_cache;</span><br><span class="line">  [ffffffff90e0e1b8]     struct page *first_page;</span><br><span class="line">       &#125;;</span><br><span class="line">&#125;</span><br><span class="line">SIZE: 64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2137 struct page *alloc_pages_current(gfp_t gfp, unsigned order)</span><br><span class="line"></span><br><span class="line">crash&gt; <span class="built_in">print</span> alloc_pages_current</span><br><span class="line"><span class="variable">$17</span> = &#123;struct page *(gfp_t, unsigned int)&#125; 0xffffffff90e0e0f0</span><br><span class="line">crash&gt;</span><br><span class="line">crash&gt; <span class="built_in">print</span> *(int*)  0xffffffff90e0e0f0</span><br><span class="line"><span class="variable">$18</span> = 4464399</span><br></pre></td></tr></table></figure>


<h3 id="Symbol-value"><a href="#Symbol-value" class="headerlink" title="Symbol value"></a>Symbol value</h3><p>symbol value store in symbol table, and mapping symbol table to some mem address ?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ nm -C &#x2F;usr&#x2F;lib&#x2F;debug&#x2F;lib&#x2F;modules&#x2F;3.10.0-957.10.1.el7_lustre.x86_64&#x2F;vmlinux</span><br><span class="line"></span><br><span class="line">symbol value: hex</span><br><span class="line">ffffffff81895de0 r a4_devices</span><br><span class="line">ffffffff81d0a200 d a4_driver</span><br><span class="line">ffffffff81f3bd97 t a4_driver_exit</span><br><span class="line">ffffffff81de2cad t a4_driver_init</span><br><span class="line">ffffffff815c33b0 t a4_event</span><br><span class="line">ffffffff815c3350 t a4_input_mapped</span><br><span class="line">ffffffff815c3510 t a4_probe</span><br><span class="line">ffffffff815c34c0 t a4_remove</span><br><span class="line">ffffffff81d1cdc0 d aalg_list</span><br><span class="line">ffffffff81c45e60 d abi_root_table2</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">$ g++ -c test.cpp</span><br><span class="line">$ cat test.cpp</span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line">static void sub(void);</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    sub();</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static void sub(void)</span><br><span class="line">&#123;</span><br><span class="line">    int *p = NULL;</span><br><span class="line">    /* derefernce a null pointer, expect core dump. */</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, *p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ nm -n -C test.o</span><br><span class="line">                 U <span class="built_in">printf</span></span><br><span class="line">0000000000000000 T main</span><br><span class="line">0000000000000010 t sub()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ objdump -td test.o</span><br><span class="line"></span><br><span class="line">test.o:     file format elf64-x86-64</span><br><span class="line"></span><br><span class="line">SYMBOL TABLE:</span><br><span class="line">0000000000000000 l    df *ABS*	0000000000000000 test.cpp</span><br><span class="line">0000000000000000 l    d  .text	0000000000000000 .text</span><br><span class="line">0000000000000000 l    d  .data	0000000000000000 .data</span><br><span class="line">0000000000000000 l    d  .bss	0000000000000000 .bss</span><br><span class="line">0000000000000010 l     F .text	0000000000000029 _ZL3subv</span><br><span class="line">0000000000000000 l    d  .rodata	0000000000000000 .rodata</span><br><span class="line">0000000000000000 l    d  .note.GNU-stack	0000000000000000 .note.GNU-stack</span><br><span class="line">0000000000000000 l    d  .eh_frame	0000000000000000 .eh_frame</span><br><span class="line">0000000000000000 l    d  .comment	0000000000000000 .comment</span><br><span class="line">0000000000000000 g     F .text	0000000000000010 main</span><br><span class="line">0000000000000000         *UND*	0000000000000000 <span class="built_in">printf</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">0000000000000000 &lt;main&gt;:</span><br><span class="line">   0:	55                   	push   %rbp</span><br><span class="line">   1:	48 89 e5             	mov    %rsp,%rbp</span><br><span class="line">   4:	e8 07 00 00 00       	callq  10 &lt;_ZL3subv&gt;</span><br><span class="line">   9:	b8 00 00 00 00       	mov    <span class="variable">$0x0</span>,%eax</span><br><span class="line">   e:	5d                   	pop    %rbp</span><br><span class="line">   f:	c3                   	retq</span><br><span class="line"></span><br><span class="line">0000000000000010 &lt;_ZL3subv&gt;:</span><br><span class="line">  10:	55                   	push   %rbp</span><br><span class="line">  11:	48 89 e5             	mov    %rsp,%rbp</span><br><span class="line">  14:	48 83 ec 10          	sub    <span class="variable">$0x10</span>,%rsp</span><br><span class="line">  18:	48 c7 45 f8 00 00 00 	movq   <span class="variable">$0x0</span>,-0x8(%rbp)</span><br><span class="line">  1f:	00</span><br><span class="line">  20:	48 8b 45 f8          	mov    -0x8(%rbp),%rax</span><br><span class="line">  24:	8b 00                	mov    (%rax),%eax</span><br><span class="line">  26:	89 c6                	mov    %eax,%esi</span><br><span class="line">  28:	bf 00 00 00 00       	mov    <span class="variable">$0x0</span>,%edi</span><br><span class="line">  2d:	b8 00 00 00 00       	mov    <span class="variable">$0x0</span>,%eax</span><br><span class="line">  32:	e8 00 00 00 00       	callq  37 &lt;_ZL3subv+0x27&gt;</span><br><span class="line">  37:	c9                   	leaveq</span><br><span class="line">  38:	c3                   	retq</span><br><span class="line"></span><br><span class="line"><span class="comment">### GCC flag</span></span><br><span class="line">-rdynamic</span><br><span class="line">Pass the flag -<span class="built_in">export</span>-dynamic to the ELF linker, on targets that support it. This instructs the linker to add all symbols, not only used ones, to the dynamic symbol table. This option is needed <span class="keyword">for</span> some uses of dlopen or to allow obtaining backtraces from within a program.</span><br></pre></td></tr></table></figure>

<h3 id="print-var"><a href="#print-var" class="headerlink" title="print var"></a>print var</h3><pre><code class="c"><span class="class"><span class="keyword">struct</span> <span class="title">tcp_timewait_sock</span> {</span>
    <span class="class"><span class="keyword">struct</span> <span class="title">inet_timewait_sock</span> <span class="title">tw_sk</span>;</span>
    u32    tw_rcv_nxt;
    u32    tw_snd_nxt;
    u32    tw_rcv_wnd;
    u32    tw_ts_offset;
    u32    tw_ts_recent;
    <span class="keyword">long</span>   tw_ts_recent_stamp;
};

<span class="class"><span class="keyword">struct</span> <span class="title">inet_timewait_sock</span> {</span>
    <span class="class"><span class="keyword">struct</span> <span class="title">sock_common</span>  __<span class="title">tw_common</span>;</span>

    <span class="keyword">int</span>                     tw_timeout;
    <span class="keyword">volatile</span> <span class="keyword">unsigned</span> <span class="keyword">char</span>  tw_substate;
    <span class="keyword">unsigned</span> <span class="keyword">char</span>           tw_rcv_wscale;
    __be16 tw_sport;
    <span class="keyword">unsigned</span> <span class="keyword">int</span> tw_ipv6only     : <span class="number">1</span>,
                 tw_transparent  : <span class="number">1</span>,
                 tw_pad          : <span class="number">6</span>,
                 tw_tos          : <span class="number">8</span>,
                 tw_ipv6_offset  : <span class="number">16</span>;
    <span class="keyword">unsigned</span> <span class="keyword">long</span>            tw_ttd;
    <span class="class"><span class="keyword">struct</span> <span class="title">inet_bind_bucket</span> *<span class="title">tw_tb</span>;</span>
    <span class="class"><span class="keyword">struct</span> <span class="title">hlist_node</span>        <span class="title">tw_death_node</span>;</span>
};</code></pre>
<p>crash&gt; print sizeof(struct tcp_timewait_sock)<br>$1 = 200   # tcp_timewait_sock 200 Bytes while inet_bind_socket 48 Bytes<br>crash&gt; print sizeof(struct tcp_sock)<br>$2 = 1952  # tcp_sock 1952 bytes<br>crash&gt; print sizeof(struct inet_bind_bucket)<br>$3 = 48    </p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/gdb/" rel="tag"><i class="fa fa-tag"></i> gdb</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/07/18/centos/" rel="prev" title="centos">
      <i class="fa fa-chevron-left"></i> centos
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/10/10/golang/" rel="next" title="golang">
      golang <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#crash"><span class="nav-number">1.</span> <span class="nav-text">crash</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#For-ubuntu"><span class="nav-number">1.1.</span> <span class="nav-text">For ubuntu</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#For-CentOS"><span class="nav-number">1.2.</span> <span class="nav-text">For CentOS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#attach-the-process"><span class="nav-number">1.3.</span> <span class="nav-text">attach the process</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol-value"><span class="nav-number">2.</span> <span class="nav-text">Symbol value</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#print-var"><span class="nav-number">3.</span> <span class="nav-text">print var</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ginger"
      src="/img/logo-4-blog.png">
  <p class="site-author-name" itemprop="name">Ginger</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ginger</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">711k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">10:46</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme  <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.6.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://b946c5a0bf547c89.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "http://yoursite.com/2019/09/29/gdb/",
            identifier: "2019/09/29/gdb/",
            title: "Rookie try to debug"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://b946c5a0bf547c89.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
